<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRANSMISSION CONTROL PROTOCOL</title>
</head>
<body>
<h1>TRANSMISSION CONTROL PROTOCOL</h1><br><br>Before you read, I highly recommend just going through the book yourself. It is highly digestable, even with little networking knowledge.<br> <br><h2>Operations</h2><br><br>Basic Data Transfer<li>TCP is able to transfer a continuous stream of octets bth directions by packaging some octets into segments</li><li>TCPs decided when to block or forward data </li><br><br>Reliablility<li>TCP must recover from data that is damaged, lost, duplicated, or delivered out of order</li><li>each octet is assigned a sequence number and requires a postitive acknowledgement (ACK)</li><li>If ACK is not received within timeout, data is retransmitted</li><li>sequence number is used at the receiver to reorganize the packets</li><li>checksum is used to verify the packet integrity</li><br><br>Flow Control<li>managed by receiver who returns a "window" with every ACK. The window indicates the number of octets that the sender may transmit before requiring permission</li><br><br>Multiplexing<li>allows for many processes within a single host to use TCP communication facilities simultaneously; TCp provides a set of addresses or ports. Network + Host address = Socket which ID's the connection</li><li>binding of ports to processes is handled by each host</li><br><br>Connections<li>in order to maintain flow control and reliability, the TCP but initialize status information for each data stream</li><li>to communicate, two processes's TTCP's must establish a connection. When communication is closed or canceled, the resources must be freed</li><br><br>Precedence and Security<li>dependant on the users</li><li>default values used if not requsted</li><br><br><h2>PHILOSOPHY</h2><br><br>Model of Operation<li>processes call TCP and pass buffers of data as arguments</li><li>TCP packages the data into segments and calls on the internet module to transmit to the destination TCP</li><li>recieving TCP decapsulates the segment and places the data into the receiving user's buffer</li><br><br>the internet module <li>packages the TCP segments inside of an internet datagram and routes it to the destiation via internet module/intermediate gateway</li><li>if local, the datagram is embedded in a local network packet</li><br><br>gateways<li>at gateways, the datagram can become "unwrapped" from it's local packet to determine which network it needs to travel next, and "re-wrapped" with a local packet suitable to the next network</li><li>gateways can also break up an internet datagram into smaller fragments (the grateway produces a set of internet datagrams, each carry a fragment of the original datagram)</li><li>this process can be done multiple times</li><br><br>destination internet module<li>unwraps the segment from the datagram (after reassembiling the fragments if necessary) and passes it to the destination TCP</li><br><br>The Host Environment<li>assumed to be in a module in an OS, controlled by a device driver module which the TCP indirectly calls when calling on the internet datagram protocol module</li><br><br>Relations to Other Protocols<li>the TCP in the protocol hierarchy</li><br><pre><br> +------+ +-----+ +-----+       +-----+<br> |Telnet| | FTP | |Voice|  ...  |     |  Application Level<br> +------+ +-----+ +-----+       +-----+<br>       |   |         |             |<br>      +-----+     +-----+       +-----+<br>      | TCP |     | RTP |  ...  |     |  Host Level<br>      +-----+     +-----+       +-----+<br>         |           |             |<br>      +-------------------------------+<br>      |    Internet Protocol & ICMP   |  Gateway Level<br>      +-------------------------------+<br>                     |<br>        +---------------------------+<br>        |   Local Network Protocol  |    Network Level<br>        +---------------------------+<br></pre><br><br>Reliable Communication<li>made available by sequence numbers and acknowledgements</li><li>first octet of data in a segment is called the segment sequence number</li><li>each segment also indicate which is the sequence number of the next expected data octet of transmission in reverse order</li><li>if TCP transmits a segment containing data, it puts a copy on a retransmission queue and starts a timer, if no acknowledgement is received before the timer runs out, the segment is retransmitted.</li><li>window frame helps govern the flow of data between TCPs</li><br><br>Connection Establishment and Clearing<br><br>Unique Identification<li>to seperate data streams, the TCP provides a port id, but that is not unique</li><li>to provide for unique addresses within each TCP, the internet address is concatenated with a port id to create a socket</li><br><br>Full Duplex<li>connection which is used to carry data in both directions</li><br><br>Port Ownership w Processes<li>there are well-known sockets which the TCP associated with "appropriate" processes</li><li>these processes can initiate connections only on the ports they own</li><br><br>Socket Connection<li>connection is specificed in the OPEN call by the local port and the foreign socket arguments</li><li>the TCP provides a connection name by which the users can refer to in subsequent calls</li><li>local connection name will be a pointer to a TCB</li><li>the OPEN call also specifies whether the connection establishment is to be actively pursued, or to be passively waited for</li><br><br>Transmission Control Block (TCB)<li>data structure which holds the information about a connection</li><br><br>Passive OPEN request<li>process wants to accept incoming connection requests rather than attempting to initiate a connection</li><li>a service process that wished to provide services for unknown other processes would issue a passive OPEN request with an unspecified foreign socket</li><br><br>Foreign Sockets<li>foreign socket of all zeros is used to denote an unspecified socket</li><li>unspecified foreign sockets are allowed only on <b>passive OPENs</b>.</li><br><br>Associating a Socket Address with a Standard Service<li>well known sockets are a convenient mechanism for a associating a socket address with a standard service</li><li>"Telnet-Server" rpocess is permanently assigned to a socket and others are reserved for File Transfer, Remote Job Entry, Text Generator, Echoer, and Sink processes</li><li>one might be resevered for a "Look-Up" service to find specific sockets</li><br><br>Active OPEN request<li>processes can issue passive OPENs and wait for matching active OPENs from other processes</li><li>two processes which issue active OPENs to eachother at the same time will be connected</li><br><br>Principal Cases for Matching Sockets<br>1. local passive OPENs has fully specified the foreign socket: match must be exact<br>2. local passive OPENs has left the foreign socket unspecified: any foreign socket is acceptable as long as the local sockets match<li>if several pending passive OPENs are targetting the same local socket, an foreign active OPEN will be matched to a TCB with the specific foreign sockets, if they exist, before selecting a TCB with an unspecified foregin socket</li><br><br>Connection Initiated<li>rendezvous of arriving segment with SYN and a waiting TCB entry each created by a user OPEN command</li><li>matching of local and foregin socket determines which a connection has been initiated</li><li>connection becomes "established" which sequence numbers have been synchronized in both directions</li><br><br>Data Communication<li>data that flows can be thought of as a stream of octets</li><br><br>PUSH Flag<li>determines whether the data sent to a user in a SEND call should be immediately pushed through to the receiving user</li><li>otherwise, a sending TCP is allowed to collect data from the sending user and to send that data in segments at its own convenience</li><li>does not provide a record service</li><br><br>PUSH flag and Buffers<li>each time a PUSH flag is associated with data placed into the receiving user's buffer, the buffer is returned to the ser for processing even if the buffer is not filled</li><li>if buffer gets filled before a PUSH, data is passed in buffer size units</li><br><br>Hijacking Communication<li>if there is urgent data the TCP provides means to communicate at some point further along in the data stream then the receiver is currently reading</li><br><br>Precedence and Security <li>provided by the internet protocol type of service field and security option</li><br><br>Robustness Principle<li>be conservative in what you do, be liberal in what you accept from others</li><br><br><h2>FUNCTIONAL SPECIFICATION</h2><br><br>Header Format<li>TCP segments are sent as internet datagrams</li><br><pre><br>  0                   1                   2                   3<br>  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |          Source Port          |       Destination Port        |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |                        Sequence Number                        |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |                    Acknowledgment Number                      |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |  Data |           |U|A|P|R|S|F|                               |<br> | Offset| Reserved  |R|C|S|S|Y|I|            Window             |<br> |       |           |G|K|H|T|N|N|                               |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |           Checksum            |         Urgent Pointer        |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |                    Options                    |    Padding    |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br> |                             data                              |<br> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br><br>                          TCP Header Format<br> </pre><li>source port: 16 bits</li><li>destination port: 16 bits</li><li>sequence number: 32 bits (sequence number of the first data octet, unless SYN)</li><li>acknowledgement number: 32 bits (contains values of the next sequence number)</li><li>data offset: 4 bits (indicates where data begins)</li><li>reserved 6 bits (zeros)</li><li>control bits</li><br><pre><br>    URG:  Urgent Pointer field significant<br>    ACK:  Acknowledgment field significant<br>    PSH:  Push Function<br>    RST:  Reset the connection<br>    SYN:  Synchronize sequence numbers<br>    FIN:  No more data from sender<br></pre><li>window: 16 bits</li><li>checksum: 16 bits (one's complement of the one's complement sum of all 16 bit words in the header)</li><br><pre><br> +--------+--------+--------+--------+<br> |           Source Address          |<br> +--------+--------+--------+--------+<br> |         Destination Address       |<br> +--------+--------+--------+--------+<br> |  zero  |  PTCL  |    TCP Length   |<br> +--------+--------+--------+--------+<br></pre><li>urgent pointer: 16 bits (indicates the current value as a +ve offest from the sequence number in this segment)</li><li>options: variable</li><br><pre><br>Case 1:  A single octet of option-kind.<br><br>Case 2:  An octet of option-kind, an octet of option-length, and<br>         the actual option-data octets.<br>Currently defined options include (kind indicated in octal):<br><br> Kind     Length    Meaning<br> ----     ------    -------<br>  0         -       End of option list.<br>  1         -       No-Operation.<br>  2         4       Maximum Segment Size.<br></pre><li>padding: variable (zeros)</li><br><br>Terminology<li>variables stored in the TCB</li><br><pre><br> Send Sequence Variables<br><br>  SND.UNA - send unacknowledged<br>  SND.NXT - send next<br>  SND.WND - send window<br>  SND.UP  - send urgent pointer<br>  SND.WL1 - segment sequence number used for last window update<br>  SND.WL2 - segment acknowledgment number used for last window<br>            update<br>  ISS     - initial send sequence number<br><br>Receive Sequence Variables<br><br>  RCV.NXT - receive next<br>  RCV.WND - receive window<br>  RCV.UP  - receive urgent pointer<br>  IRS     - initial receive sequence number<br></pre><br><br><br><br><br>                    <br><br><br>
</body>
</html>